
local component = require("component")
local gpu = component.gpu
local event = require("event")

-- 警报系统框架
local alert_system = {}

-- 警报等级定义
local ALERT_LEVELS = {
  warning = 1,
  error = 2,
  fatal = 3
}

-- 警报颜色定义
local ALERT_COLORS = {
  warning = 0xFFFF00,  -- 黄色
  error = 0xFF0000,    -- 红色
  fatal = 0xFF0000     -- 红色
}

-- 存储注册的警报
local registered_alerts = {}
local triggered_alerts = {}
local frame_count = 0

-- 初始化屏幕
local function initialize_screen()
  gpu.setResolution(80, 25)
  return 80, 25
end

-- 注册警报
function alert_system.register_alert(level, condition_func, name)
  if not ALERT_LEVELS[level] then
    error("无效的警报等级: " .. level)
  end
  
  local alert_id = #registered_alerts + 1
  registered_alerts[alert_id] = {
    level = level,
    condition = condition_func,
    name = name,
    id = alert_id
  }
  
  return alert_id
end

-- 检查所有警报
function alert_system.check_alerts()
  triggered_alerts = {}  -- 清空之前触发的警报
  
  for id, alert in pairs(registered_alerts) do
    local result = alert.condition()
    if result and result.is_triggered and result.message then
      table.insert(triggered_alerts, {
        level = alert.level,
        name = alert.name,
        message = result.message,
        id = alert.id
      })
    end
  end
end

function create_banner(text, speed)
  local banner_text = "违章蛮干铸成终身遗憾，遵章守纪伴你一生平安。    生产再忙，安全不忘;人命关天，安全为先。    精力集中最安全，粗心大意最危险。    发现问题马上报，及时处理要做好。    放松安全一时，悔恨人生一世。    多看一眼，安全保险;多防一步，少出事故。    宁愿事前检查，绝不事后返工。    事故不长眼，你严他就远。    事故隐患不除，等于放虎归山。    时时刻刻想安全，幸福和你紧相连。    贯彻安全生产标准化标准，提高企业管理效率。    健康发展，稳抓质量。    严格规章制度，确保施工安全。治理事故隐患，监督危险作业。    开展民主评议行风，接受社会各界广泛监督。    千忙万忙出了事故白忙，千苦万苦受伤害者最苦。    今天工作不安全、明天生活不保障。    上班一走神、事故敲你门。    平安到家，家人放心。    安全与遵章同在，事故与违规相随。    筑安全长城，兴钻井经济。    安全来于警惕，事故处于麻痹;巧干带来安全，蛮干招来祸端。    固安全防线，解后顾之忧。    安全是增产的细胞，隐患是事故的胚胎。    安全不离口，规章不离手。安不可忘危，治不可忘乱。    你和安全结朋友，平安活到九十九。    对违章的庇护，就是对职工的伤害。    多看一眼，安全保险。多防一步，少出事故。    万千产品堆成山，一星火源毁于旦。    事故不长眼，你严他就远。    工地小型机械多、要安漏电保护器。    格要求安全在，松松垮垮事故来。    双手创造财富，用安全编织幸福。    前预想班中防，事故苗头难漏网。    动创造财富，安全带来幸福。    全、生产“两手”硬、质量、效益有保证。    知识提升安全理念，靠科技支撑安全监管。    秒钟的事故，一辈子的痛苦。    产再忙，安全不忘，人命关天，安全在先。    福是棵树，安全是沃土。    严谨思考，严密操作;严格检查，严肃验证。    安全生产勿侥幸，违章蛮干要人命。    抓质量如同与对手挑战，抓安全如同对敌作战。    不收不良品、不做不良品、不出不良品。    安全是最大的节约，事故是最大的浪费。    事故就在一瞬间，时刻精心保安全。    事故猛于虎，安全贵如金。    工作为了生活好，安全为了活到老。    重视安全就是珍惜人生，抓好安全就是保护生命。    抓基础从细处着眼，防隐患从小处着手。    树立企业安全形象，促进安全文明生产。    离安全法规近，距隐患事故远。    生命珍贵安全至上，创造幸福安全必行。    手与手拉起安全的防线，心与心筑起生命的港湾。    健全安全规章制度，落实安全生产责任。    与其事后痛哭流涕，不如事前遵章守纪。    安全是生命之本，违章是事故之源。    和谐社会要创建，安全生产是关键。    安全是幸福家庭的保障，事故是人生悲剧的祸根。    忽视安全抓生产是火中取栗，脱离安全求效益是水中捞月。    绊人的桩不在高，违章的事不在小。    漏洞不补，事故难堵。    质量是安全基础，安全为生产前提。    安全生产责任重于泰山。    人以安为乐厂以安为兴。    父母望您遵章守纪、妻儿盼您毫发无损。    校园是我家，平安靠大家。    强化质量监督，严把质量关口。    上道出工，精力集中，按章作业，事故不生。    甜蜜的家盼着您平安归来。    成功者找方法，失败者找借口。    大事化小教训难找，小事化了后患不少。    劳动创造财富，安全带来幸福。    走人生安全之路，从文明施工起步。    苍蝇贪甜死于蜜，作业图快失于急。    班前常自检，事故可避免。    从严管理、扎实工作、确保质量。    出门挣钱不容易，安全千万要注意。    生产必须安全，安全促进生产。    安全伴君一生，生命只有一次。    心系安全一点，拥有蓝天一片。    故为家庭导演悲剧,安全为生活谱写新歌    故与侥幸相伴,平安与谨慎相随    人为本,营造平安和谐社会    全带来幸福,劳动创造财富    强安全生产必须标本兼治,重在治本    传《道路交通安全法》,告别一切不文明行为    质安全是预防工作的境界,以人为本是安全管理的根本核心    扬安全理念,规范安全行为,塑造安全环境,推进安全管理    立安全发展观,培育关注安全,关爱生命的社会风尚    法履行职责,确保消防安全    强消防法制意识,提高自防自救能力    时刻刻防火,年年岁岁安全    绝火灾事故,平安千家万户    抓实干创平安,全民参与搞防范    手尽责保平安,齐抓共管护家园    全第一,预防为主,遵章守纪,尽职尽责    全隐患大于天,质量责任重于山    全是一种责任,为己为家为他人    全是职工的生命线，职工是安全的负责人。    全勤劳 生活美好    全法规血写成，违章害己害亲人。    全是幸福家庭的保证，事故是人生悲剧的祸根。    火须不放过一点火种，防事故须勿存半点侥幸。    全措施订得细，事故预防有保证，宁为安全操碎心，不让事故害人民。    对违章讲人情，事故对你不留情。无情于违章惩处，有情于幸福家庭。    轮一转想责任，油门紧连行人命。    全警句千条万条，安全生产第一条。千计万计，安全教育第一计。    蜜的家盼着您平安归来    全知识 让你化险为夷    门无牵挂，先把火源查。火灾不难防，重在守规章。    产必须安全 安全促进生产    实安全规章制度 强化安全防范措施    微杜渐 警钟长鸣    人讲安全 家家保平安    全生产勿侥幸，违章蛮干要人命。    守规则，欢笑的亲人。违章行车，狞笑的是死神。    全人人抓，幸福千万家。安全两天敌，违章和麻痹。    全来于警惕，事故处于麻痹。巧干带来安全，蛮干招来祸端。    全生产你管我管，大家管才平安。事故隐患你查我查，人人查方安全。    好安全生产促进经济发展    播安全文化 宣传安全知识    全来于警惕 事故出于麻痹    量是企业的生命 安全是职工的生命    安全投资是最大的福利    是爱，松是害，搞好安全利三代    事故年年平安福满门 讲安全人人健康乐万家    康的身体离不开锻炼 美满的家庭离不开安全    全生产，生产蒸蒸日上;文明建设，建设欣欣向荣    绷紧安全的弦 就弹不出生产的调    全花开把春报 生产效益节节高    全生产责任重于泰山    全——我们永恒的旋律    业负责，行业管理，国家监察，群众监督    霜偏打无根草 事故专找懒惰人    全是最大的节约 事故是最大的浪费    量是安全基础 安全为生产前提    忽一时 痛苦一世    产再忙 安全不忘    视安全抓生产是火中取栗 脱离安全求效益如水中捞月    福是棵树 安全是沃土    全是朵幸福花 合家浇灌美如画    全是家庭幸福的保证 事故是人生悲剧的祸根    动创造财富 安全带来幸福    心无大错 粗心铸大过    时注意安全 处处预防事故    高兴兴上班 平平安安回家    砣不大压千斤 安全帽小救人命    痹是最大的隐患 失职是最大的祸根    全是生命之本，违章是事故之源。    安全千日不足，出事故一日有余。    全和效益结伴而行，事故与损失同时发生。    刀不磨会生锈 安全不抓出纰漏    业效益最重要，防火安全第一条。    全就是节约，安全就是生命。    全保健康 千金及不上    全为了生产 生产必须安全    绕百丈远 不冒一步险    全不离口 规章不离手    全是生命的基石，安全是欢乐的阶梯。    傲自满是事故的导火索，谦虚谨慎是安全的铺路石。    全编织幸福的花环，违章酿成悔恨的苦酒。    看一眼，安全保险。多防一步，少出事故。    心大意是事故的温床 马虎是安全航道的暗礁    干是走向事故深渊的第一步    睛容不下一粒砂土 安全来不得半点马虎    草不除禾苗不壮 隐患不除效益难上    千产品堆成山 一星火源毁于旦    全是增产的细胞 隐患是事故的胚胎    视安全硕果来 忽视安全遭祸害    全不离口，规章不离手。安不可忘危，治不可忘乱。    险是事故之友，谨慎为安全之本。    全不能指望事后诸葛，为了安全须三思而后行。    忍危险等于作法自毙，谨慎行事才能安然无恙。    全第一，预防为主。生命宝贵，安全第一。    全生产，人人有责。遵章守纪，保障安全。    全是幸福的保障，治理隐患保障安全。    全创造幸福，疏忽带来痛苦。安全就是效益，安全技就是幸福。    全在你脚下，安全在你手中。安全伴着幸福，安全创造财富。    全.舒适.长寿是当代人民的追求。重视安全.关心安全.为安全献力。    极行动起来，开展“安全生产周”活动。深入贯彻“安全第一，预防为主”的方针。    好安全生产工作，树立企业安全形象。改善职工劳动条件，促进安全文明生产。    了您全家幸福，请注意安全生产。为了您和他人的幸福，处处时时注意安全。    安全是关系社会安定.经济发展的大事。强化安全生产管理，保护职工的安全与健康。    反违章.除隐患.保安全.促生产。创造一个良好的安全生产环境。    严格规章制度，确保施工安全。治理事故隐患，监督危险作业。    提高全民安全意识，养成遵章守纪美德。宣传安全文化知识，推动安全文明生产。    自觉遵守各项安全生产规章制度是劳动者的义务和职责。    安全生产常抓不懈，抓而不紧，等于不抓。    加强劳动人员保护工作就是保护生产力。保护职工的安全健康是企业的头等大事。    安全生产“五同时”,各级领导要落实。全国人民奔小康，安全文明第一桩。    安全与减灾关系到全民的幸福和安宁。提高全民安全素质必须从娃娃抓起。    人命关天，安全第一。安全第一，防灾防损。力保安全，促进安全。    执行劳动安全法规，搞好安全生产工作。加强职工劳动保护，人人学会保护自己。    命仅有一次，安全伴君一生。    全来于警惕，事故出于麻痹。    海之前先探风，入岗之前先练功    全措施订得细，事故预防有保证    命仅有一次，安全伴君一生    故缘于疏忽，安全重在防范    全第一，预防为主，综合治理    福是棵树安全是沃土。    险物品，隔离放置；标识清晰，注意防火。    产必须安全，安全促进生产。    有防而不实，没有防不胜防    量是安全基础，安全为生产前提    好安全生产，促进经济发展。    有大意吃亏，没有细心上当    量是企业的生命，安全是职工的生命。    传安全生产工作，遏制重特大事故发生    产再忙，安全不忘，人命关天，安全在先。    命至高无上，安全职责为天。    高全民安全素质必须从娃娃抓起，进取开展中小学安全日活动。    蜜的家盼着您平安归来    全不离口，规章不离手    强劳动人员保护工作就是保护生产力。保护职工的安全健康是企业的头等大事。    钢靠锻打，安全要严抓    心无大错，粗心铸大过。    全是的节俭，事故是的浪费。    全是的节俭事故是的浪费。    故源于麻痹安全来自警惕    通安全靠大家，生活安宁连万家    绕百丈远，不冒一步险。    立礼貌工地塑造企业形象。    产再忙，安全不忘    高安全意识，注意防范工作。    求别人关爱，不如自我保护。    全是发展之本，安全是发展之基。    险是事故之苗，谨慎为安全之本。    格管理总是爱，放纵懈怠终是害。    边隐患大家纠，安全生产众人管。    全是生命之本，违章是事故之源。    是爱，松是害，杜绝事故为后代。    持以人为本的发展理念，始终把人民生命安全放在首位    以最坚决的态度、最严格的要求、最严厉的手段、最有效的措施、的勇气和最严明的纪律，牢牢坚守安全生产红线    牢固树立安全生产“红线”意识，树立“科学发展、安全发展”理念    以人为本，安全发展    发展是第一要务，安全是第一责任    生命至上，安全第一    安全源于长期警惕，事故源于瞬间麻痹    开展“安全生产月”活动，发出安全生产音    安全生产必须党政同责、一岗双责、齐抓共管    管行业必须管安全、管业务必须管安全、管生产经营必须管安全    安全生产人人有责，提高全民安全意识，普及全民安全知识，提高全民安全素质    培养安全习惯，倡导安全文化，提高安全素养    珍爱生命，安全第一。    一人违章，众人遭殃。    安不忘危，乐不忘忧。    防火一松，人财两空。    疏忽一时，痛苦一世。    幸福是棵树，安全是沃土。    宁让千人恨，不让一家哭。    一人安全生产，全家欢乐无限。    宁可停工停产，决不违章蛮干。    事故隐患不除，等于放虎归山。    强安全法治保障安全生产    全责任,重在落实。    人遵守建筑法安全生产靠大家    爱生命,安全发展。    星之火可以燎原小小隐患易酿大祸    泛开展安全月活动,深入贯彻《安全生产法》    全第一,预防为主,综合治理。    强全民消防意思提高全民消防素质    灾逃生命为先切莫贪图物和钱    防设施别乱动扑救火灾保安全    真学习消防知识提高自防自救能力    患险于明火防范胜于救灾    防事关你我他安全系着千万家    泛深入开展全国安全生产月活动    除火灾隐患构建和谐社会    入开展隐患治理,喜迎建党九十周年    展三项活动,落实三项建设    及安全知识技能,增强员工安康意识    时注意安全,处处预防事故。    泛开展打三非,反三违,防三超活动    强安全文化建设,促进企业安全生产    注安全,平安是福。    人讲安全,家家保平安    全齐参加,预防靠大家    好安全生产,促进经济发展    人为本,安全第一    爱生命,关注安全    高全民安全意识,倡导社会和谐风尚    范安全生产管理,建立安全长效机制    命至高无尚,安全责任为天    全连着你我他,平安幸福靠大家    实《安全生产法》,人人事事保安全    业要发展,安全是保障    府统一领导,部门依法监管,企业全面负责,社会监督支持    全责任重于泰山    活幸福来自安全,人生快乐首当平安    程是安全工作的生命,责任是安全工作的灵魂    施工安全靠你我，幸福连着大家伙。    感情深，一口闷，酒后上班头发昏;上班之前不喝酒，互相提醒够朋友。    安全是家庭幸福的保证，事故是人生悲剧的祸根。    人人讲安全，安全为人人。    积极行动起来，开展“安全生产周”活动。深入贯彻“安全第一，预防为主”的方针。    生命至高无上，安全责任为天。    严是爱，松是害，疏忽大意事故来。严是爱，松是害，保障安全利三代。    安全在你脚下，安全在你手中。安全伴着幸福，安全创造财富。    多看一眼，安全保险;多防一步，少出事故。    心系安全一点，拥有蓝天一片。    生命至高无上，安全责任为天。    生命只有一次，安全伴君一生。    马虎、迷糊、不在乎，早早晚晚出事故。    当你违章作业之际，正是灾难降临之时。    跨进校园，走进平安，建设平安校园，你我共同的责任。    安得万人在，全心为生产。    有品质才有市场，有改善才有进步。    安全生产，警钟长鸣。    防护加警惕保安全，无知加大意必危险。    没有品质，便没有企业的明天。    黄金有价，生命无价。    造高楼靠打基础，保安全靠抓班组。    实施安全生产法人人事事保安全。    走平地，防摔跤;顺水船，防暗礁。    员工生命高于一切，安全责任重于泰山。    事非经过不知难，教训临头终觉晚。    留一生安全给自己，送一份平安给家人。    不伤害自己，不伤害别人。    防火须不放过一点火种，防事故须勿存半点侥幸。    讲究实效，完善管理，提升品质，增创效益。    全第一 预防为主    人讲安全 安全为人人    人讲安全，事事为安全;时时想安全，处处要安全    年大计质量第一    全生产 人人有责    全生产 重在预防    产必须安全 安全促进生产    实安全规章制度 强化安全防范措施    全生产责任重于泰山    百年大计质量先安全生产记心间    企业负责，行业管理，国家监察，群众监督    科学管理施工规范    甜蜜的家盼着您平安归来    安全知识 让你化险为夷    安全勤劳 生活美好    故不难防，重在守规章。    全天天讲，隐患时时防。    全隐患，就是定时炸弹。    全是根弦，一松就要悬。    动创造财富安全带来幸福。    街建筑严禁行人靠近行走。    故出于麻痹，安全来于警惕。    全就是节约，安全就是生命。    时注意安全，处处预防事故。    安全来于警惕，事故出于麻痹。    安全为了生产，生产必须安全。    生命只有一次，安全伴君一生。    安全伴着幸福，安全创造财富。    安全创造幸福，疏忽带来痛苦。    安全挂在心上，规程握在手上。    安全就是节约，安全保障生命。    树立安全观念，坚持安全生产。    规程操作，安全领跑生产。    落实安全责任，夯实安全基础。    生命只有一次，安全时刻牢记。    人讲安全，事事为安全;时时想安全，处处要安全    全人人抓，幸福千万家    全生产，人人有责    全生产，重在预防    产必须安全，安全促进生产    实安全规章制度，强化安全防范措施    全生产责任重于泰山    全——我们永恒的旋律    业负责，行业管理，国家监察，群众监督    寒霜偏打无根草，事故专找懒惰人    甜蜜的家盼着您平安归来    安全知识让你化险为夷    安全勤劳生活美好    抓好安全生产，促进经济发展    传播安全文化，宣传安全知识    安全来于警惕，事故出于麻痹    防微杜渐警钟长鸣    人人讲安全家家保平安    严是爱，松是害，搞好安全利三代    防事故年年平安福满门，讲安全人人健康乐万家    健康的身体离不开锻炼，美满的家庭离不开安全    安全是家庭幸福的保证，事故是人生悲剧的祸根    劳动创造财富，安全带来幸福    质量是企业的生命，安全是职工的生命    为安全投资是的福利    安全是的'节约，事故是的浪费    麻痹是的隐患，失职是的祸根    安全生产，生产蒸蒸曰上;文明建设，建设欣欣向荣    不绷紧安全的弦就弹不出生产的调    安全花开把春报，生产效益节节高    忽视安全抓生产是火中取栗，脱离安全求效益如水中捞月    幸福是棵树，安全是沃土    安全保健康，千金及不上    安全为了生产，生产必须安全    宁绕百丈远，不冒一步险    质量是安全基础，安全为生产前提    疏忽一时，痛苦一世    生产再忙，安全不忘    小心无大错，粗心铸大过    时时注意安全，处处预防事故    粗心大意是事故的温床，马虎是安全航道的暗礁    蛮干是走向事故深渊的第一步    眼睛容不下一粒砂土，安全来不得半点马虎    杂草不除禾苗不壮，隐患不除效益难上    万千产品堆成山，一星火源毁于旦    安全是增产的细胞，隐患是事故的胚胎    重视安全硕果来，忽视安全遭祸害    快刀不磨会生锈，安全不抓出纰漏    高高兴兴上班，平平安安回家    秤砣不大压千斤，安全帽小救人命    实安全规章制度，强化安全防范措施。    爱生命，关注安全。    人事事讲安全，事事人人保平安。    全是生命的基石，安全是欢乐的阶梯。    好产品包装工作，确认产品最终质量。    质量求生存，以管理取效益。    格要求安全在，松松垮垮事故来。    有麻痹吃亏，没有警惕上当。    握安全，拥有明天。    危险物品，隔离放置，标识清晰，注意防火。    安全是前提，管理是关键。    保安全千日不足，出事故瞬间有余。    安全第一，事故为零。    生命至高无上，安全责任为天。    事故不难防，重在守规章。    企业效益最重要，防火安全第一条。    做安全标兵，当生产闯将。    安全生产勿侥幸，违章蛮干出人命。    安全是幸福的源泉，安全是效益的保障。    巧干带来安全，蛮干招来祸端。    安全生产人人抓，平安幸福你我他。    宣传安全法规，普及安全知识。    安全伴一生一世，幸福在你家我家。    班前检查一分钟，有防无患莫放松。    做好安全工作，树立企业形象。    时时注意安全，处处防止事故。    每天自我检讨，品质自然更好。    安全警句千条万条，安全生产第一条。千计万计，安全教育第一计。    质量是生命，安全是保证。    安全措施要到位，事故和你不相会。    安全挂在心上，规程握在手上。    安全和效益结伴而行，事故与损失同时发生。    一人安全，全家幸福;一人违章，大家遭殃。    百年大计，质量第一。    生产再忙、安全不忘，人命关天、安全为先。    牢固树立安全第一的思想。    以科技为动力，以质量求生存。    安全花开把春报，生产效益节节高。    警惕安全在，麻痹事故来。    企业效益最重要，安全防火第一条。    全发展，科学发展    强班组安全管理，弘扬企业安全文化。    安共同心声，安全效应。    故隐患详排查，安全管理标准化。    全与幸福相伴，安全与质量同行。    知大意必危险，防护警惕保安全。    觉遵守是保障，安全规程系生命。    处预防事故，时时注意安全。    人讲安全家家保平安    事故年年平安福满门讲安全人人健康乐万家    康的身体离不开锻炼美满的家庭离不开安全    全是家庭幸福的保证事故是悲剧的祸根    动创造财富安全带来幸福    安全投资时的福利    全是的节约事故是的浪费    痹是的隐患失职是的祸根    视安全抓好生产是火中取栗脱离安全求效益如水中捞月    产再忙安全不忘    心无大错粗心铸大过    时注意安全处处预防事故    心大意是事故的温床马虎是安全航道的暗礁    干是走向事故深渊的地步    全不离口规章不离手    全是朵幸福花合家浇灌美如画    不可忘危治不可忘乱    进经济发展，抓好安全生产。    全生产第一条，安全警句千万条。    班组提高管理水平，重教育推进安全文化。    播安全文化，启迪安全新思维。    事故年年平安福满门，讲安全人人健康乐万家。    动创造财富，安全带来幸福。    量是企业的生命，安全是职工的生命。    不可忘危，治不可忘乱。    起堤坝洪水挡，练就技能事故防。    理基础打得牢，安全大厦层层高。    全生产重在预防    强全员、全过程、全方位安全管理，全面提高安全生产水平    实安全规章制度强化安全防范措施    全发展，预防为主    蜜的家盼着你平安归来    全知识让你化险为夷    好安全生产促进社会和谐    播安全文化宣传安全知识    全来自自警惕，事故出于麻痹。    全人人抓好幸福千万家    全来自警惕，事故出于麻痹。    实安全生产责任制，依法管理安全生产。    全是的效益，事故是的浪费。    高安全意识，倡导安全文化。    大安全投入，改善生产条件，促效益保安全。    化安全防范措施，落实安全规章制度。    全出效益，安全促发展。    彻《安全生产法》，促进安全生产形势稳定好转。    强安全隐患综合治理，防止减少生产安全事故。    安全来自警惕，事故源于麻痹。    强化安全教育，提高安全技能，减少安全事故。    企业要发展，安全是保障。    严禁违章指挥.违章作业.违反劳动纪律。    安全生产责任重于泰山。    安全责任为天，生命至高无上。    安全是幸福的源泉，安全是效益的保障。    安全第一，预防为主，综合治理。    广泛深入开展全国安全生产月活动。    弘扬安全文化，提高安全素质。    强化安全教育，狠抓制度落实。    安全帽必须戴，防止坠物掉下来。安全带是个宝，高空保险不能少。    安全在身，家人放心。安全疏忽，苦难缠身。    安全是于警惕，事故出于麻痹。    今日注意安全，节日合家团圆。    搞好安全生产工作，树立企业安全形象。改善职工劳动条件，促进安全文明生产。    严格规章制度，确保施工安全。治理事故隐患，监督危险作业。    提高全民安全意识，养成遵章守纪美德。宣传安全文化知识，推动安全文明生产。    自觉遵守各项安全生产规章制度是劳动者的义务和职责。    安全生产常抓不懈，抓而不紧，等于不抓。     加强劳动人员保护工作就是保护生产力。保护职工的安全健康是企业的头等大事。     安全生产“五同时”，各级领导要落实。全国人民奔小康，安全文明第一桩。     安全与减灾关系到全民的幸福和安宁。提高全民安全素质必须从娃娃抓起。     安全生产，人人有责。     珍惜生命，勿忘安全。     关注安全，平安是福。     经济腾飞，安全保障。     安全生产责任重于泰山。     企业要发展，安全是保障。     人以安为乐 厂以安为兴。     客户是上帝，质量是生命，地球是市场，安全是保障。     生产安全保驾 生命安全护航。     安全意识在我心中，安全生产在我手中。     关爱生命，安全发展。     坚持安全发展 助推萧山实现“转危为机 跨越发展”。     安全第一，预防为主。     安全生产创效益 违规操作酿祸端。     安全是生命之本，违章是事故之源。     安全发展，国泰民安。     以人为本，安全第一。     遵章守纪，关爱生命。     安全人人抓，幸福千万家。     一人把关一处安 众人把关稳如山。     锁链最脆弱的一环决定它的强度安全最危险的一面决定你的生命。     安全万事兴，麻痹人财空。     安全连着你我他，平安幸福靠大家。     积极推进 “三项行动”“三项工作” 全面落实“安全生产年”各项活动。     安全生产，人人有责。     安全意识在我心中，安全生产在我手中。     关爱生命，安全发展。     遵章守纪，关爱生命。    实开展好春季安全生产大检查活动。    全第一，预防为主，综合治理。    全发展，国泰民安。    人为本，安全第一。    章守纪，关爱生命。    全生产，人人有责。    惜生命，勿忘安全。    注安全，平安是福。    济腾飞，安全保障。    安全生产责任重于泰山。    企业要发展，安全是保障。    安全人人抓，幸福千万家。    安全是生命之本，违章是事故之源。    安全连着你我他，平安幸福靠大家。    隐患险于明火，防范胜于救灾。    安全来自长期警惕，事故源于瞬间麻痹。    安全是家庭幸福的保证，事故是人生悲剧的祸根。    实施《安全生产法》，人人事事保安全。    认真学习，大力宣传，坚决贯彻《安全生产法》。    提高法律意识，增强法制观念，学好用好《安全生产法》    立企业安全形象，促进安全文明生产。    全就是生命，责任重于泰山。    安思危除隐患，预防为主保安全。    展安全月活动，深入贯彻安全法。    命至高无尚，安全责任为天。    了违章严批评，道是无情却有情。    场施工讲文明，周围居民得安宁。    全是效益的保障，安全是幸福的源泉。    患险于明火，防范胜于救灾，责任重于泰山。    广泛动员，强化监督，责任到位，常抓不懈。    生产必须安全，安全促进生产。    广泛动员，狠抓落实，群防群控。    实施安全生产法，人人事事保安全。    依法监管，公正执法，确保安全。    广泛开展安全活动，深入贯彻安全生产法。    留一生安全给自己，送一份平安给家人。    建筑“三宝”配备好，保障生命安全方有效。    造高楼靠打基础，保安全靠抓班组。    严格落实安全标准化管理，确保安全生产。    落实安全规章制度，强化安全防范措施。    掌握安全生产知识，争做遵章守纪职工。    确保安全防治措施落实，加强专项整治重点监管。    安全第一，预防为主，综合治理，保障安全。    生产再忙，安全不忘，人命关天，安全在先。    安全来自长期警惕，事故源于瞬间麻痹。    多看一眼，安全保险;多防一步，少出事故。    认真贯彻“安全第一，预防为主”的方针，增强职工的安全意识和安全防护能力。    要认真抓好安全生产责任制的落实，稳步促进安全形式好转。    落实省建设厅安全专项整治工作方案，强化安全生产监督管理。     认真落实安全生产标准化、法制化、程序化、规范化。    执行劳动安全法规，搞好安全生产工作;加强职工劳动保护，人人学会保护自己。    为了您全家幸福，请注意安全生产。为了您和他人的幸福，处处时时注意安全。    加强劳动人员保护工作就是保护生产力。保护职工的安全健康是企业的头等大事。    反违章、除隐患、保安全、促生产。创造一个良好的安全生产环境。    搞好安全生产工作，树立企业安全形象。改善职工劳动条件，促进安全文明生产。    可千日不松无事，不可一日不防酿祸。    化事故隐患整改，提高安全管理水平。    故隐患不除尽，等于放虎归山林。    全出效益，安全促发展。    头常亮安全灯，平安生活伴人生。    绝违章指挥，杜绝违章作业。    品质才有市场，有改善才有进步。    故教训是镜子，安全经验是明灯。    忍危险等于作法自毙，谨慎行事才能安然无恙。    加强健康教育，提高健康水平。    安全与效益同行，事故与损失同在。    宁为安全操碎心，不让事故害工人。    安全生产挂嘴上，不如现场跑几趟。安全生产月几园，违章蛮干缺半边。    用平安祝福校园的今天，用平安打造校园的未来。    讲文明，讲卫生，改陋习，树新风。    生命至高无尚，安全责任为天。    家家争做文明家庭，人人参与创建活动。    生产计划预排好，物控需求精算巧。    和谐社会，健康为本。    造高楼靠打基础，保安全靠抓班组。制度严格漏洞少，措施得力安全好。    建筑施工安全为先，漫长人生平安是福。    树立企业形象，保证安全健康。    安全第一，质量为本。    安全不能指望事后诸葛，为了安全须三思而后行。    事事注意安全，处处防止事故。    过马路要眼观六路，耳听八方。    为了您和家庭的幸福，请注意安全。    安全是幸福家庭的保证，事故是人生悲剧的祸根。    安全管理，重在落实。    违章操作，一害国家，二害自己。    父母望您遵章守纪，妻儿盼您毫发无损。    生命只有一次，安全没有终止。    严是爱，松是害，搞好安全利三代。    作业时戴安全帽，流汗总比流血好。    人人讲安全，家家保平安。    生命最宝贵，安全是前提。    为了您和他人的家庭幸福，请时刻注意施工安全。    安全是职工的生命线，职工是安全的负责人。    宁绕百米远，不冒一步险。    重视安全硕果来，忽视安全遭祸害。    事故不难防重在守规章。    依靠科技以人为本，群策群力缔造卓越。    思想松一松，事故攻一攻。    安全生产责任重于泰山。    知识技能决定工作效率。    化红线意识，促进安全发展。    真宣传贯彻习近平总书记关于安全生产系列讲话精神，牢牢坚守安全生产红线。    展决不能以牺牲人的生命为代价。    全生产是不可逾越的红线。    要带血的GDP，不要带血的财政收入。    安全带上岗把幸福带回家。    命至高无上，安全责任为天。    全第一、预防为主、综合治理。    安全理直气壮，抓安全坚定不移。    事故在瞬间发生，安全从点滴做起。    制度严格漏洞少，措施得力安全好。    无情于违章惩处，有情于家庭幸福。    安全是幸福的保障，治理隐患保障安全。     安全创造幸福，疏忽带来痛苦。安全就是效益，安全技就是幸福。    安全在你脚下，安全在你手中。安全伴着幸福，安全创造财富。    安全是幸福之本，违章是祸害之源。    宁为安全操碎心，不让事故害人民。    宁可千日不松无事，不可一日不防酿祸。    生命与安全一线牵，安全与幸福两相连。    安全生产是人命关天的大事，是不能踩的“红线”。    以人为本，安全发展。    发展是第一要务，安全是第一责任。    生命至上，安全第一。    安全源于长期警惕，事故源于瞬间麻痹。    开展“安全生产月”活动，发出安全生产最强音。    安全生产必须党政同责、一岗双责、齐抓共管。    管行业必须管安全、管业务必须管安全、管生产经营必须管安全。    人命关天，安全第一。安全第一，防灾防损。力保安全，促进安全。    为了您全家幸福，请注意安全生产。为了您和他人的幸福，处处时时注意安全。    安全规程系生命，自觉遵守是保障。    全是职工的生命线，职工是安全的负责人。    爱生命，安全发展。    全在管理，管理在干部。    取措施，防患于未然。    全要讲，事故要防，安不忘危，乐不忘忧。    则执行考评改善创新。    强现场工序管理，严谨过程因素控制。    为安全作贡献，安全为我保平安。    是爱松是害，严中自有真情在。    制度不全，事故难免。    安全来于警惕，事故出于麻痹。    以人为本，安全第一。    安全一松，全线告终;坚持不懈，万事成功。    宁绕百丈远，不冒一步险。    要认真抓好安全生产责任制的落实，稳步促进安全形式好转。    无论是看得见，还是看不见的地方，都要彻底打扫干净。    为己为家为国、安全必须牢记。    无事勤提防，遇事稳如山。    找方法才能成功，找借口只会失败。    筑起堤坝洪水挡，练就技能事故防。    事事及时做，一日胜三天。    革除马虎之心，提升产品品质。    依靠科技以人为本，群策群力缔造卓越。    安全，利国、利民、利家庭;违章，害人、害已、害企业。    推行安全生产标准化，促进职业健康安全管理水平的提高。    生命可贵当珍爱，丝毫麻痹都是害。    隐患不除根，事故根连根。    领导检查是关爱，认真对待去整改。    瞎马乱闯必惹祸，操作马虎必出错。    好钢靠锻打，安全要严抓。    安全来自长期警惕，事故源于瞬间麻痹。    隐患险于明火，防范胜于救灾，责任重于泰山。    接地接零装置好、搬运断电带手套。    条条规章血写成，人人必须严执行。    宁可千日不松无事，不可一日不防酿祸。抓基础从大处着眼，防隐患从小处着手。    态度意识决定工作质量。    安全就是节约，安全就是生命。    气泄于针孔，祸始于违章。    安全谨记心安全永伴你。    安全编织幸福的花环，违章酿成悔恨的苦酒。    次事故九图快，麻痹大意是祸害。    重安全，保护健康，关爱生命。    有麻痹吃亏，没有警惕上当。    视安全硕果来，忽视安全遭祸害。    俭节约，爱护公物，以厂为家，共同发展。    命只有一次，安全没有终止。    门挣钱不容易，安全千万要注意。    家就是爱生命，重情更应重安全。    可千日不松无事，不可一日不防酿祸。    提高安全意识，建设文明工地。    推行品管，降低成本，增加利润。    安全生产牢牢记，生命不能当儿戏。    我的安全我负责，别人安全我有责。    精心设计，精良工艺，精益求精，精品非凡。    好钢靠锻打，安全要严抓。    遵章是安全的先导，违章是事故的预兆。    安全人人抓，幸福千万家。    事前多检讨，事后少烦恼。    抓好安全生产，促进经济发展。    打工千日苦，不酿一时祸。    增强师生防范意识，营造校园安全环境。    只有防而不实，没有防不胜防。    消除一切安全隐患，保障生产工作安全。    走人生安全之路，从文明施工起步。    船到江心补漏迟，事故临头后悔晚。    提高安全意识，倡导文明风尚。    道路牵着你我他，安全系着千万家。    安全花开把春报，生产效益节节高。    安全生产记在心，健康二字值千金。    思想走了神，事故瞬间生。    成功意味着发展，发展意味着变革。    搞好环境卫生，共建美好家园。    养成良好习惯，提高整体素质。    把握安全，拥有幸福。    在岗一分钟，安全六十秒。    全花开把春报，生产效益节节高。    全靠规章，严守不能忘    起堤坝洪水挡，练就技能事故防    全文化是企业文化建设的基础，安全文化是企业文化的组成部分。    安全千日不足，出事故一日有余。    全规程系生产，自觉遵守是保障    心无大错，粗心铸大过    管成线，群管成网；上下结合，事故难藏。    产不忘安全，工作确保质量    建和谐社会坚持安全发展。    住山河不迷路，记住规章防事故    全创造幸福，疏忽带来痛苦。安全就是效益，安全就是幸福。    学发展，安全发展。    全生产职责重于泰山    全第一，预防为主，综合治理，安全发展。    强消防安全培训，提升你我安全意识。    住山河不迷路，记住规章防事故。    微杜渐，警钟长鸣。    注安全，关爱生命。    全是朵幸福花，合家浇灌美如画。    痹是的隐患失职是的祸根。    水性，好划船;学本领，保安全    全是生命之本违章是事故之源。    霜偏打无根草，事故专找懒惰人    高全民安全意识，倡导安全礼貌风尚。    播安全文化，宣传安全知识。    防消防，重在预防。加强防火管理，不准违章动火。    高全民安全意识，养成遵章守纪美德。宣传安全文化知识，推动安全礼貌生产。    子不擦试不明，事故不分析不清。    高青少年的安全文化素质是具有战略意义的举措，繁荣我国安全文化艺术是安全文化建设的重要任务之一。    高全民安全意识，倡导安全礼貌风尚    立交通礼貌意识，自觉维护交通秩序。    量是安全基础，安全为生产前提。    业负责，行业管理，国家监察，群众监督。    泄于针孔，祸始于违章    不可忘危，治不可忘乱。    千产品堆成山，一星火源毁于旦    要无事故，须下苦功夫。    全生产，重在预防    全生产，人人有责    干是走向事故深渊的第一步。    平地，防摔跤;顺水船，防暗礁    强“三项建设”，推进安全发展    展“安全生产月”活动，提高全民安全防护意识    全生产，人人有责。遵章守纪，保障安全。    有麻痹吃亏，没有警惕上当    视安全抓生产是火中取栗，脱离安全求效益如水中捞月。    保生产安全严禁违章作业。    病从口入，事故由松出    安全投资是的福利    人讲安全，家家保平安    防.消防，重在预防。加强防火管理，不准违章动火。    行劳动安全法规，搞好安全生产工作。加强职工劳动保护，人人学会保护自己。    全在身，家人放心。安全疏忽，苦难缠身。    全是于警惕，事故出于麻痹。    日注意安全，节日合家团圆。    绕百米远，不冒一步险。    命关天，安全第一。安全第一，防灾防损。力保安全，促进安全。    好安全生产工作，树立企业安全形象。改善职工劳动条件，促进安全文明生产。    是爱.松是害，发生事故坑三代。    爱家就是爱生命，重情更应重安全。    生产安全不管企业效益玩完！    防微杜渐，警钟长鸣。    千忙万忙出了事故白忙，千苦万苦受伤害者最苦。    提高青少年的安全文化素质是具有战略意义的举措，繁荣我国安全文化艺术是安全文化建设的重要任务之一。    安全你一人，幸福全家人。    你重视，我参与，安全生产一起抓；齐努力，共谋划，生产安全靠大家。    安全文化是企业文化建设的基础，安全文化是企业文化的组成部分。    安全第一是真理，全家不能没有你。    安全是关系社会安定.经济发展的大事。强化安全生产管理，保护职工的安全与健康。    安全创造幸福，疏忽带来痛苦。安全就是效益，安全技就是幸福。    灯微微笑，请你歇歇脚!    全警句千条万条，安全生产第一条。千计万计，安全教育第一计。    让为荣霸道耻，各行其道皆欢喜!    强劳动人员保护工作就是保护生产力。保护职工的安全健康是企业的头等大事。    幸成功不是经验，冒险蛮干不是勇敢。    看一眼，安全保险。多防一步，少出事故。    全不能指望事后诸葛，为了安全须三思而后行。    保用品“常备不懈”，遵章守纪，“常年累月”。    全第一贵在行动，预防为主从我做起。    安全不离口，规章不离手。安不可忘危，治不可忘乱。    容忍危险等于作法自毙，谨慎行事才能安然无恙。    只有绷紧安全之弦，才能弹奏幸福之音。    自主保安重在自觉，相互保安贵在互爱。    安全法规血写成，违章害己害亲人。    安全是职工的生命线，职工是安全的负责人。    全不能指望事后诸葛，为了安全须三思而后行。    违章的'庇护，就是对职工的伤害。    扬安全文化，规范安全行为。    好安全生产工作，树立企业安全形象。改善职工劳动条件，促进安全文明生产。    键，监督是工程质量的保证。    质要做好，首要高阶层的与参与。    患不除根，事故根连根。    全意识“得过且过”；危险隐患“得寸进尺”。    理整顿做得好，清洁打扫没烦恼。    干头万绪，安全在先。    和谐社会，健康为本。    生产再忙，安全不忘，人命关天，安全在先。    秤砣不大压千斤，安全帽小救人命。    安全一松，全线告终；坚持不懈，万事成功。    病魔乘体虚而入，灾祸因麻痹而生。    安全保健康，千金及不上。    爱妻爱子爱家庭，无视安全等于零。    小洞不补，大洞吃苦。    安全在我心中，生命在我手中。    光明正大团结一致礼貌谦让奋斗向上！    人遵守建筑法安全生产靠大家。    爱生命，安全发展。    星之火可以燎原小小隐患易酿大祸。    全第一，预防为主，综合治理。    全生产，人人有责。遵章守纪，保障安全。    全是幸福的保障，治理隐患保障安全。    故出于麻痹，安全来于警惕。    量是安全基础，安全为生产前提。    知加大意必危险，防护加警惕保安全。    安全是生命之本，违章是事故之源。    保安全千日不足，出事故一日有余。    安全和效益结伴而行，事故与损失同时发生。    企业效益最重要，防火安全第一条。    安全就是节约，安全就是生命。    安全是生命的基石，安全是欢乐的阶梯。    安全创造幸福，疏忽带来痛苦。安全就是效益，安全技就是幸福。    安全在你脚下，安全在你手中。安全伴着幸福，安全创造财富。    安全.舒适.长寿是当代人民的追求。重视安全.关心安全.为安全献力。    积极行动起来，开展“安全生产周”活动。深入贯彻“安全第一，预防为主”的方针。    搞好安全生产工作，树立企业安全形象。改善职工劳动条件，促进安全文明生产。    睛容不下一粒砂土 安全来不得半点马虎    全为了生产 生产必须安全    懂莫逞能 事故不上门    着眼睛捉不住麻雀 不学技术保不了安全    子不擦试不明 事故不分析不清    基础从小处着眼 防隐患从小处着手    水性，好划船;学本领，保安全    理基础打得牢 安全大厦层层高    蜜的家盼着您平安归来    全知识 让你化险为夷    心大意是事故的温床 马虎是安全航道的暗礁    绕百丈远 不冒一步险    住山河不迷路 记住规章防事故    沾自喜事故来 时时警惕安全在    有大意吃亏 没有小心上当    是爱，松是害，搞好安全利三代    事故年年平安福满门 讲安全人人健康乐万家    康的身体离不开锻炼 美满的家庭离不开安全    故教训是镜子 安全经验是明灯    千产品堆成山 一星火源毁于旦    全是增产的细胞 隐患是事故的胚胎    度不全 事故难免    全措施订得细 事故预防有保证    章守纪光荣 违章违纪可耻    稼离不开阳光 安全少不了规章    傲自满是事故的导火线 谦虚谨慎是安全的铺路石    添灯草勤加油 常敲警钟勤堵漏    全人人抓，幸福千万家    怕千日紧 只怕一时松    病从口入 事故由松出    时注意安全 处处预防事故    不可忘危 治不可忘乱    要无事故 须下苦功夫    海之前先探风 上岗之前先练功    起堤坝洪水挡 练就技能事故防    傲源于浅薄 鲁莽出自无知    护加警惕保安全 无知加大意必危险    全生产 重在预防    病要早 除患要细    一块砖头倒一堵墙 松一颗螺丝断一根梁    毛细雨湿衣裳 小事不防上大当    安全投资是最大的福利    量是安全基础 安全为生产前提    格要求安全在 松松垮垮事故来    钢靠锻打 安全要严抓    策群力科学管理 戒骄戒躁杜绝事故    全第一 预防为主    人讲安全 安全为人人    人讲安全，事事为安全;时时想安全，处处要安全    章是幸福的保障 违纪是灾祸的开端    可千日不松无事 不可一日不防酿祸    到江心补漏迟 事故临头后悔晚    全是朵幸福花 合家浇灌美如画    人讲安全 家家保平安    全勤劳 生活美好    好安全生产促进经济发展    播安全文化 宣传安全知识    全来于警惕 事故出于麻痹    火不救火烧身 有章不循祸缠身    人违章 众人遭殃    全生产 人人有责    全是家庭幸福的保证 事故是人生悲剧的祸根    动创造财富 安全带来幸福    量是企业的生命 安全是职工的生命    产必须安全 安全促进生产    实安全规章制度 强化安全防范措施    全生产责任重于泰山    全——我们永恒的旋律    业负责，行业管理，国家监察，群众监督    霜偏打无根草 事故专找懒惰人    管成线，群管成网;上下结合，事故难藏    实一项措施 胜过十句口号    章违纪不狠抓 害人害己害国家    视安全硕果来 忽视安全遭祸害    者用鲜血换取教训 智者用教训避免事故    全是最大的节约 事故是最大的浪费    痹是最大的隐患 失职是最大的祸根    全生产，生产蒸蒸日上;文明建设，建设欣欣向荣    忽一时 痛苦一世    产再忙 安全不忘    绷紧安全的弦 就弹不出生产的调    全花开把春报 生产效益节节高    草不除禾苗不壮 隐患不除效益难上    刀不磨会生锈 安全不抓出纰漏    人的桩不在高 违章的事不在小    门带伞防天雨 上岗遵章防事故    对违章讲人情 事故对你不留情    其事后痛苦流涕 不如事前遵章守纪    章是安全的先导 违章是事故的预兆    泄于针孔 祸始于违章    全靠规章 严守不能忘    安思危 常备不懈    虫蛀大梁 隐患酿事端    全来自长期警惕 事故源于瞬间麻痹    有防而不实 没有防不胜防    平地，防摔跤;顺水船，防暗礁    事勤提防 遇事稳如山    叶底下防虫害 平静之中防隐患    微杜渐 警钟长鸣    心无大错 粗心铸大过    高兴兴上班 平平安安回家    砣不大压千斤 安全帽小救人命    全不离口 规章不离手    看一眼，安全保险;多防一步，少出事故    福是棵树 安全是沃土    全保健康 千金及不上    视安全抓生产是火中取栗 脱离安全求效益如水中捞月    干是走向事故深渊的第一步  "   
  local offset = 1
  local scroll_speed = speed or 0.2  -- 默认滚动速度
  
  local function update_banner()
    local screen_width, screen_height = 120, 25
    
    -- 清除屏幕底部一行
    gpu.set(1, screen_height, string.rep(" ", screen_width))
    
    -- 计算显示的文本片段
    local display_text = ""
    for i = 1, screen_width do
      local char_index = ((offset + i - 2) % string.len(banner_text)) + 1
      display_text = display_text .. string.sub(banner_text, char_index, char_index)
    end
    
    -- 在屏幕底部显示横幅
    gpu.set(-2, screen_height, display_text)
    
    -- 更新偏移量
    offset = (offset % string.len(banner_text)) + 1
  end
  
  local function run()
    while true do
      update_banner()
      os.sleep(scroll_speed)
    end
  end
  
  return {
    update = update_banner,
    run = run
  }
end

banner_instance = create_banner(text, speed)

-- 显示警报到屏幕
function alert_system.display_alerts()
  
  -- 显示标题
  gpu.set(1, 1, "警报监控系统")

  banner_instance.update()
  local width, height = 80, 25
  
  -- 显示触发的警报
  local line_num = 3
  for i, alert in ipairs(triggered_alerts) do
    if line_num <= height then
      -- 设置颜色根据警报等级
      local color = ALERT_COLORS[alert.level] or 0xFFFFFF
      gpu.setForeground(color)
      
      -- 构建显示文本
      local display_text = string.format("[%s]: %s", alert.name, alert.message)
      
      -- 截断过长的文本以适应屏幕宽度
      if string.len(display_text) > width then
        display_text = string.sub(display_text, 1, width - 3) .. "..."
      end
      
      gpu.set(1, line_num, display_text)
      line_num = line_num + 1
    end

  end
  
  -- 恢复白色前景色
  gpu.setForeground(0xFFFFFF)
end

-- 检查是否存在指定等级或更高级别的警报
function alert_system.has_alerts_at_level_or_higher(level)
  local level_value = ALERT_LEVELS[level]
  if not level_value then
    return false
  end
  
  for _, alert in ipairs(triggered_alerts) do
    if ALERT_LEVELS[alert.level] >= level_value then
      return true
    end
  end
  
  return false
end

-- 为error级别提供触发函数
function alert_system.on_error_triggered()
  if alert_system.has_alerts_at_level_or_higher("error") then
    -- 这里可以添加error级别的特定处理逻辑, 比如触发蜂鸣器
    print("检测到错误级别警报")
    return true
  end
  return false
end

-- 为fatal级别提供触发函数
function alert_system.on_fatal_triggered()
  if alert_system.has_alerts_at_level_or_higher("fatal") then
    -- 这里可以添加fatal级别的特定处理逻辑, 比如自动关服
    print("检测到致命错误级别警报")
    return true
  end
  return false
end

-- 主循环函数
function alert_system.run()
  local width, height = initialize_screen()
  
  -- 跟踪error级别警报的持续帧数
  local error_alert_duration = 0
  -- 跟踪fatal级别警报的持续帧数  
  local fatal_alert_duration = 0
  
  while true do

    frame_count = frame_count + 1
    
    -- 检查警报
    alert_system.check_alerts()
    
    -- 更新警报持续时间
    if alert_system.has_alerts_at_level_or_higher("error") then
      error_alert_duration = error_alert_duration + 1
    else
      error_alert_duration = 0
    end
    
    if alert_system.has_alerts_at_level_or_higher("fatal") then
      fatal_alert_duration = fatal_alert_duration + 1
    else
      fatal_alert_duration = 0
    end
    
    -- 检查是否有error以上级别的警报且已持续15帧以上
    if error_alert_duration >= 15 then
      alert_system.on_error_triggered()
    end
    
    -- 检查是否有fatal级别的警报且已持续15帧以上
    if fatal_alert_duration >= 15 then
      alert_system.on_fatal_triggered()
    end

    -- 清屏
    gpu.setForeground(0xFFFFFF)
    gpu.fill(1, 1, 80, 25, " ")
  
    -- 显示警报
    alert_system.display_alerts()
    
    -- 等待下一帧 (这里使用简单的延时，实际可以监听事件)
    os.sleep(0.1)
  end
end

local function example_condition()
    local some_condition_met = math.random() > 0.8
    if some_condition_met then
        return {is_triggered = true, message = "模拟警报消息"}
    else
        return {is_triggered = false, message = ""}
    end
end

-- GT机器电量警报条件函数
local function gt_machine_eu_condition(machine_proxy, threshold)
  return function()
    local stored = machine_proxy.getEUStored()
    if stored < threshold then
      return {is_triggered = true, message = string.format("电量不足: %d EU", stored)}
    else
      return {is_triggered = false, message = ""}
    end
  end
end

-- GT机器电量百分比警报条件函数
local function gt_machine_eu_percentage_condition(machine_proxy, percentage_threshold)
  return function()
    local stored = machine_proxy.getEUStored()
    local max_stored = machine_proxy.getEUMaxStored()
    if max_stored > 0 then
      local percentage = (stored / max_stored) * 100
      if percentage < percentage_threshold then
        return {is_triggered = true, message = string.format("电量百分比过低: %.2f%%", percentage)}
      else
        return {is_triggered = false, message = ""}
      end
    else
      return {is_triggered = false, message = ""}
    end
  end
end

-- GT机器传感器信息警报条件函数
local function gt_machine_sensor_condition(machine_proxy, check_function)
  return function()
    local sensor_info = machine_proxy.getSensorInformation()
    local result = check_function(sensor_info)
    if result then
      return {is_triggered = true, message = result}
    else
      return {is_triggered = false, message = ""}
    end
  end
end

-- AE某物品数量警报条件函数
local function ae_item_count_condition(me_interface_proxy, item_filter, min_count)
  return function()
    local items = me_interface_proxy.getItemsInNetwork(item_filter)
    local total_count = 0
    for _, item in ipairs(items) do
      total_count = total_count + item.size
    end
    
    if total_count < min_count then
      local item_name = item_filter.name or "未知物品"
      return {is_triggered = true, message = string.format("物品数量不足: %s, 当前: %d, 需要: %d", item_name, total_count, min_count)}
    else
      return {is_triggered = false, message = ""}
    end
  end
end

-- 红石信号输入警报条件函数
local function redstone_input_condition(redstone_proxy, side, threshold, compare_type)
  return function()
    local signal = redstone_proxy.getInput(side)
    local triggered = false
    local message = ""
    
    if compare_type == "high" then
      if signal >= threshold then
        triggered = true
        message = string.format("红石信号过高: %d", signal)
      end
    elseif compare_type == "low" then
      if signal <= threshold then
        triggered = true
        message = string.format("红石信号过低: %d", signal)
      end
    else  -- default to "equal"
      if signal == threshold then
        triggered = true
        message = string.format("红石信号达到阈值: %d", signal)
      end
    end
    
    return {is_triggered = triggered, message = message}
  end
end

-------------------
--  在这里注册警报  --
-------------------

local function aatrue()
  return {is_triggered = true, message = "aaaaaaa"}
end

alert_system.register_alert("warning", example_condition, "示例警告")
alert_system.register_alert("error", aatrue, "示例警告")

-------------------
-------------------
-------------------

alert_system.run()

return alert_system

